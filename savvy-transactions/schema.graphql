##########################################################
##                                                      ##
## THIS FILE IS AUTOGENERATED BY ./setup/buildSchema.ts ##
##                DO NOT EDIT DIRECTLY                  ##
##                                                      ##
##########################################################

enum Network {
  ARBITRUM_ONE
  ARBITRUM_GOERLI
  ARWEAVE_MAINNET
  AURORA
  AVALANCHE
  BOBA
  BSC # aka BNB Chain
  CELO
  COSMOS
  CRONOS
  MAINNET # Ethereum Mainnet
  FANTOM
  FUSE
  HARMONY
  JUNO
  MOONBEAM
  MOONRIVER
  NEAR_MAINNET
  OPTIMISM
  OSMOSIS
  MATIC # aka Polygon
  XDAI # aka Gnosis Chain
}

###########################
## Blockchain Primitives ##
###########################

type Block @entity {
  " Block number "
  id: ID!

  " Block number "
  number: BigInt!

  " Block hash "
  hash: Bytes!

  " Timestamp of this block "
  timestamp: BigInt!

  " List of events related to this block "
  events: [Event!]! @derivedFrom(field: "block")

  " List of transactions in this block "
  transactions: [Transaction!]! @derivedFrom(field: "block")
}

type Transaction @entity {
  " Transaction hash "
  id: ID!

  " Transaction hash "
  hash: Bytes!

  " Transaction input data "
  input: Bytes!

  " Transaction from "
  from: Bytes

  " Transaction to "
  to: Bytes

  " Block this transaction commited on "
  block: Block!

  " Timestamp of this transaction "
  timestamp: BigInt!

  " List of events emitted by this transaction "
  events: [Event!]! @derivedFrom(field: "transaction")
}

"""
An event is any user action that occurs in a protocol. Generally, they are Ethereum events
emitted by a function in the smart contracts, stored in transaction receipts as event logs.
However, some user actions of interest are function calls that don't emit events. For example,
the deposit and withdraw functions in Yearn do not emit any events. In our subgraphs, we still
store them as events, although they are not technically Ethereum events emitted by smart
contracts.
"""
interface Event {
  " { Transaction hash }-{ Log index } "
  id: ID!

  " Transaction hash of the transaction that emitted this event "
  transaction: Transaction!

  " Event log index. For transactions that don't emit event, create arbitrary index starting from 0 "
  logIndex: Int!

  # " The protocol this transaction belongs to "
  # protocol: Protocol!

  " Block number of this event "
  block: Block!

  " Timestamp of this event "
  timestamp: BigInt!
}

type Token @entity @regularPolling {
  " Smart contract address of the token "
  id: ID!

  " Name of the token, mirrored from the smart contract "
  name: String!

  " Symbol of the token, mirrored from the smart contract "
  symbol: String!

  " The number of decimal places this token uses, default to 18 "
  decimals: Int!

  " Optional field to track the price of a token, mostly for caching purposes "
  lastPriceUSD: BigDecimal

  " Optional field to track the block number of the last token price "
  lastPriceBlockNumber: BigInt
}

interface Contract {
  " Contract address "
  id: ID!
}

#########################
##### Savvy Account #####
#########################

type Account @entity @regularPolling {
  " The address of the account "
  id: ID!

  " staked SVY amount "
  stakedSVY: BigInt!
  
  " Total deposited in Savvy in USD "
  totalDepositedUSD: BigInt!

  " Total outstanding debt from Savvy in USD "
  totalDebtUSD: BigInt!
  
  "The timestamp of the last update"
  lastUpdatedTimestamp: BigInt!
}

type AccountSnapshot @entity {
  " { The address of the account }-{ snapshot timestamp }"
  id: ID!
  
  "The time between snapshots in seconds"
  period: BigInt!
  
  " The timestamp of the snapshot "
  timestamp: BigInt!

  " staked SVY amount "
  stakedSVY: BigInt!
  
  " Total deposited in Savvy in USD "
  totalDepositedUSD: BigInt!

  " Total outstanding debt from Savvy in USD "
  totalDebtUSD: BigInt!
}

type AccountBalance @entity {
  " { Account Address }-{ Synthetic Type } "
  id: ID!

  " The account that this balance belongs to "
  account: Account!

  " The synthetic type this balance is referring to (e.g. USD, ETH, BTC ) "
  syntheticType: String!

  " The outstanding debt in amount of SPM Synthetic (e.g. svUSD)"
  debt: BigInt!

  " The outstanding debt in USD "
  debtUSD: BigInt!

  " The total amount deposited in SPM in USD "
  totalDepositedUSD: BigInt!
  
  "The timestamp of the last update"
  lastUpdatedTimestamp: BigInt!
}

type AccountBalanceSnapshot @entity {
  " { Account Address }-{ Synthetic Type }-{ Snapshot timestamp } "
  id: ID!
    
  "The time between snapshots in seconds"
  period: BigInt!
  
  " The timestamp of the snapshot "
  timestamp: BigInt!

  " The account that this balance belongs to "
  account: Account!

  " The synthetic type this balance is referring to (e.g. USD, ETH, BTC ) "
  syntheticType: String!

  " The outstanding debt in amount of SPM Synthetic (e.g. svUSD)"
  debt: BigInt!

  " The outstanding debt in USD "
  debtUSD: BigInt!

  " The total amount deposited in SPM in USD "
  totalDepositedUSD: BigInt!
}

type StrategyBalance @entity {
  " { Account Address }-{ Synthetic Type }-{ Strategy Address } "
  id: ID!

  " The account balance that this strategy balance belongs to "
  accountBalance: AccountBalance!

  " The yield strategy that this balance represents "
  strategy: Strategy!

  " The amount deposited in this strategy "
  amountDeposited: BigInt!

  " The amount deposited in this strategy in USD "
  amountDepositedUSD: BigInt!

  "The timestamp of the last update"
  lastUpdatedTimestamp: BigInt!
}

type StrategyBalanceSnapshot @entity {
  " { Account Address }-{ Synthetic Type }-{ Strategy Address }-{ Snapshot Timestamp } "
  id: ID!
  
  " The account balance that this strategy balance belongs to "
  accountBalance: AccountBalance!
  
  "The time between snapshots in seconds"
  period: BigInt!
  
  " The timestamp of the snapshot "
  timestamp: BigInt!

  " The yield strategy that this balance represents "
  strategy: Strategy!

  " The amount deposited in this strategy "
  amountDeposited: BigInt!

  " The amount deposited in this strategy in USD "
  amountDepositedUSD: BigInt!
}

type Strategy implements Contract @entity {
  " Strategy(Yield Token) Address "
  id: ID!

  " Base token address "
  baseTokenAddress: Bytes
}

##################################
##### Savvy Position Manager #####
##################################

type SPMDeposit implements Event @entity(immutable: true) {
  " { Transaction hash }-{ Log index } "
  id: ID!

  " Transaction hash of the transaction that emitted this event "
  transaction: Transaction!

  " Event log index. For transactions that don't emit event, create arbitrary index starting from 0 "
  logIndex: Int!

  " Block number of this event "
  block: Block!

  " Timestamp of this event "
  timestamp: BigInt!

  sender: Bytes! # address
  yieldToken: Bytes! # address
  amount: BigInt!
  recipient: Bytes! # address
}

type SPMBorrow implements Event @entity(immutable: true) {
  " { Transaction hash }-{ Log index } "
  id: ID!

  " Transaction hash of the transaction that emitted this event "
  transaction: Transaction!

  " Event log index. For transactions that don't emit event, create arbitrary index starting from 0 "
  logIndex: Int!

  " Block number of this event "
  block: Block!

  " Timestamp of this event "
  timestamp: BigInt!

  owner: Bytes! # address
  amount: BigInt!
  recipient: Bytes! # address
}

type SPMRepay implements Event @entity(immutable: true) {
  " { Transaction hash }-{ Log index } "
  id: ID!

  " Transaction hash of the transaction that emitted this event "
  transaction: Transaction!

  " Event log index. For transactions that don't emit event, create arbitrary index starting from 0 "
  logIndex: Int!

  " Block number of this event "
  block: Block!

  " Timestamp of this event "
  timestamp: BigInt!

  repayer: Bytes! # address
  repayWith: String! # "DebtToken, BaseToken, Collateral"
  repayToken: Bytes! # address
  repayTokenAmount: BigInt!
  credit: BigInt!
  recipient: Bytes! # address
}

type SPMWithdraw implements Event @entity(immutable: true) {
  " { Transaction hash }-{ Log index } "
  id: ID!

  " Transaction hash of the transaction that emitted this event "
  transaction: Transaction!

  " Event log index. For transactions that don't emit event, create arbitrary index starting from 0 "
  logIndex: Int!

  " Block number of this event "
  block: Block!

  " Timestamp of this event "
  timestamp: BigInt!

  owner: Bytes! # address
  yieldToken: Bytes! # address
  shares: BigInt!
  recipient: Bytes! # address
}

################
## Savvy Sage ##
################

type SageSetFlowRateEvent implements Event @entity @transaction {
  " { Transaction hash }-{ Log index } "
  id: ID!

  " Transaction hash of the transaction that emitted this event "
  transaction: Transaction!

  " Event log index. For transactions that don't emit event, create arbitrary index starting from 0 "
  logIndex: Int!

  # " The protocol this transaction belongs to "
  # protocol: Protocol!

  " Block number of this event "
  block: Block!

  " Timestamp of this event "
  timestamp: BigInt!

  " The base token being set "
  baseToken: String!

  " The flow rate for the base token "
  flowRate: BigInt!
}

################
## Savvy Swap ##
################

type SSDeposit implements Event @entity(immutable: true) {
  " { Transaction hash }-{ Log index } "
  id: ID!

  " Transaction hash of the transaction that emitted this event "
  transaction: Transaction!

  " Event log index. For transactions that don't emit event, create arbitrary index starting from 0 "
  logIndex: Int!

  " Block number of this event "
  block: Block!

  " Timestamp of this event "
  timestamp: BigInt!

  sender: Bytes! # address
  recipient: Bytes! # address
  amount: BigInt!
}

type SSWithdraw implements Event @entity(immutable: true) {
  " { Transaction hash }-{ Log index } "
  id: ID!

  " Transaction hash of the transaction that emitted this event "
  transaction: Transaction!

  " Event log index. For transactions that don't emit event, create arbitrary index starting from 0 "
  logIndex: Int!

  " Block number of this event "
  block: Block!

  " Timestamp of this event "
  timestamp: BigInt!

  sender: Bytes! # address
  recipient: Bytes! # address
  amount: BigInt!
}

type SSClaim implements Event @entity(immutable: true) {
  " { Transaction hash }-{ Log index } "
  id: ID!

  " Transaction hash of the transaction that emitted this event "
  transaction: Transaction!

  " Event log index. For transactions that don't emit event, create arbitrary index starting from 0 "
  logIndex: Int!

  " Block number of this event "
  block: Block!

  " Timestamp of this event "
  timestamp: BigInt!

  sender: Bytes! # address
  recipient: Bytes! # address
  amount: BigInt!
}

type SSSwap implements Event @entity(immutable: true) {
  " { Transaction hash }-{ Log index } "
  id: ID!

  " Transaction hash of the transaction that emitted this event "
  transaction: Transaction!

  " Event log index. For transactions that don't emit event, create arbitrary index starting from 0 "
  logIndex: Int!

  " Block number of this event "
  block: Block!

  " Timestamp of this event "
  timestamp: BigInt!

  sender: Bytes! # address
  amount: BigInt!
}

################
## Savvy VeSVY ##
################

type VeSStaked implements Event @entity(immutable: true) {
  " { Transaction hash }-{ Log index } "
  id: ID!

  " Transaction hash of the transaction that emitted this event "
  transaction: Transaction!

  " Event log index. For transactions that don't emit event, create arbitrary index starting from 0 "
  logIndex: Int!

  " Block number of this event "
  block: Block!

  " Timestamp of this event "
  timestamp: BigInt!

  sender: Bytes! # address
  user: Bytes! # address
  amount: BigInt!
}

type VeSUnstaked implements Event @entity(immutable: true) {
  " { Transaction hash }-{ Log index } "
  id: ID!

  " Transaction hash of the transaction that emitted this event "
  transaction: Transaction!

  " Event log index. For transactions that don't emit event, create arbitrary index starting from 0 "
  logIndex: Int!

  " Block number of this event "
  block: Block!

  " Timestamp of this event "
  timestamp: BigInt!

  user: Bytes! # address
  amount: BigInt!
}

type VeSClaimed implements Event @entity(immutable: true) {
  " { Transaction hash }-{ Log index } "
  id: ID!

  " Transaction hash of the transaction that emitted this event "
  transaction: Transaction!

  " Event log index. For transactions that don't emit event, create arbitrary index starting from 0 "
  logIndex: Int!

  " Block number of this event "
  block: Block!

  " Timestamp of this event "
  timestamp: BigInt!

  user: Bytes! # address
  amount: BigInt!
}

################
## Savvy Booster ##
################

type SBDeposit implements Event @entity(immutable: true) {
  " { Transaction hash }-{ Log index } "
  id: ID!

  " Transaction hash of the transaction that emitted this event "
  transaction: Transaction!

  " Event log index. For transactions that don't emit event, create arbitrary index starting from 0 "
  logIndex: Int!

  " Block number of this event "
  block: Block!

  " Timestamp of this event "
  timestamp: BigInt!

  amount: BigInt!
  poolId: BigInt! # address
}

type SBWithdraw implements Event @entity(immutable: true) {
  " { Transaction hash }-{ Log index } "
  id: ID!

  " Transaction hash of the transaction that emitted this event "
  transaction: Transaction!

  " Event log index. For transactions that don't emit event, create arbitrary index starting from 0 "
  logIndex: Int!

  " Block number of this event "
  block: Block!

  " Timestamp of this event "
  timestamp: BigInt!

  amount: BigInt!
}

type SBClaim implements Event @entity(immutable: true) {
  " { Transaction hash }-{ Log index } "
  id: ID!

  " Transaction hash of the transaction that emitted this event "
  transaction: Transaction!

  " Event log index. For transactions that don't emit event, create arbitrary index starting from 0 "
  logIndex: Int!

  " Block number of this event "
  block: Block!

  " Timestamp of this event "
  timestamp: BigInt!

  user: Bytes! # address
  rewardAmount: BigInt!
  pendingAmount: BigInt!
}
